"use strict";
var ProductModel = require("./product");
var Products = (function () {
    function Products(products) {
        if (products === void 0) { products = []; }
        var _this = this;
        this.productsList = new Array();
        products.forEach(function (product) { return _this.productsList.push(product); });
    }
    Products.prototype.list = function () {
        return this.productsList;
    };
    Products.prototype.add = function (productName, productQuantity) {
        var productIds = this.productsList.map(function (product) { return product.getId(); });
        var productId = Math.max.apply(Math, productIds) + 1;
        var product = new ProductModel.Product(productId, productName, productQuantity);
        this.productsList.push(product);
        return this.productsList;
    };
    Products.prototype.delete = function (productId) {
        var deleted = false;
        this.productsList = this.productsList.filter(function (product) {
            deleted = deleted || product.getId() === productId;
            return product.getId() !== productId;
        });
        return deleted;
    };
    Products.prototype.fetch = function (productId) {
        return productId && this.productsList.filter(function (product) { return product.getId() === productId; }).shift();
    };
    Products.prototype.find = function (productQuery) {
        var productId = parseInt(productQuery);
        productQuery = productQuery.toLowerCase();
        return this.productsList.filter(function (product) { return product.getId() === productId
            || product.getName().toLowerCase() === productQuery; }).shift();
    };
    return Products;
}());
exports.Products = Products;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsL3Byb2R1Y3RzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx3Q0FBeUM7QUFFekM7SUFFSSxrQkFBWSxRQUEwQztRQUExQyx5QkFBQSxFQUFBLGFBQTBDO1FBQXRELGlCQUtDO1FBSkcsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLEtBQUssRUFBd0IsQ0FBQztRQUN0RCxRQUFRLENBQUMsT0FBTyxDQUNaLFVBQUMsT0FBTyxJQUFLLE9BQUEsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQS9CLENBQStCLENBQy9DLENBQUM7SUFDTixDQUFDO0lBQ00sdUJBQUksR0FBWDtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFDTSxzQkFBRyxHQUFWLFVBQVcsV0FBbUIsRUFBRSxlQUF1QjtRQUVuRCxJQUFJLFVBQVUsR0FBa0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQ2pELFVBQUMsT0FBTyxJQUFLLE9BQUEsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFmLENBQWUsQ0FDL0IsQ0FBQztRQUNGLElBQUksU0FBUyxHQUFXLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxFQUFRLFVBQVUsSUFBSSxDQUFDLENBQUM7UUFFcEQsSUFBSSxPQUFPLEdBQUcsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxXQUFXLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFFaEYsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDaEMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUNNLHlCQUFNLEdBQWIsVUFBYyxTQUFpQjtRQUU3QixJQUFJLE9BQU8sR0FBWSxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FDMUMsVUFBQyxPQUE2QjtZQUM1QixPQUFPLEdBQUcsT0FBTyxJQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxTQUFTLENBQUM7WUFDbkQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxTQUFTLENBQUE7UUFDdEMsQ0FBQyxDQUNGLENBQUE7UUFDRCxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ2pCLENBQUM7SUFDTSx3QkFBSyxHQUFaLFVBQWEsU0FBaUI7UUFDMUIsTUFBTSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FDeEMsVUFBQyxPQUE2QixJQUFLLE9BQUEsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLFNBQVMsRUFBN0IsQ0FBNkIsQ0FDbkUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFDTSx1QkFBSSxHQUFYLFVBQVksWUFBb0I7UUFDOUIsSUFBSSxTQUFTLEdBQVcsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQy9DLFlBQVksR0FBRyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUMzQixVQUFDLE9BQTZCLElBQUssT0FBQSxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssU0FBUztlQUM3RCxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsV0FBVyxFQUFFLEtBQUssWUFBWSxFQURoQixDQUNnQixDQUN0RCxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUNMLGVBQUM7QUFBRCxDQS9DQSxBQStDQyxJQUFBO0FBL0NZLDRCQUFRIiwiZmlsZSI6Im1vZGVsL3Byb2R1Y3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUHJvZHVjdE1vZGVsIGZyb20gJy4vcHJvZHVjdCdcblxuZXhwb3J0IGNsYXNzIFByb2R1Y3RzIHtcbiAgICBwcml2YXRlIHByb2R1Y3RzTGlzdDogQXJyYXk8UHJvZHVjdE1vZGVsLlByb2R1Y3Q+O1xuICAgIGNvbnN0cnVjdG9yKHByb2R1Y3RzOiBBcnJheTxQcm9kdWN0TW9kZWwuUHJvZHVjdD4gPSBbXSkge1xuICAgICAgICB0aGlzLnByb2R1Y3RzTGlzdCA9IG5ldyBBcnJheTxQcm9kdWN0TW9kZWwuUHJvZHVjdD4oKTtcbiAgICAgICAgcHJvZHVjdHMuZm9yRWFjaChcbiAgICAgICAgICAgIChwcm9kdWN0KSA9PiB0aGlzLnByb2R1Y3RzTGlzdC5wdXNoKHByb2R1Y3QpXG4gICAgICAgICk7XG4gICAgfVxuICAgIHB1YmxpYyBsaXN0KCk6IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzTGlzdDtcbiAgICB9XG4gICAgcHVibGljIGFkZChwcm9kdWN0TmFtZTogc3RyaW5nLCBwcm9kdWN0UXVhbnRpdHk6IG51bWJlcik6IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PiB7XG5cbiAgICAgICAgbGV0IHByb2R1Y3RJZHM6IEFycmF5PG51bWJlcj4gPSB0aGlzLnByb2R1Y3RzTGlzdC5tYXAoXG4gICAgICAgICAgICAocHJvZHVjdCkgPT4gcHJvZHVjdC5nZXRJZCgpXG4gICAgICAgICk7XG4gICAgICAgIGxldCBwcm9kdWN0SWQ6IG51bWJlciA9IE1hdGgubWF4KC4uLnByb2R1Y3RJZHMpICsgMTtcblxuICAgICAgICBsZXQgcHJvZHVjdCA9IG5ldyBQcm9kdWN0TW9kZWwuUHJvZHVjdChwcm9kdWN0SWQsIHByb2R1Y3ROYW1lLCBwcm9kdWN0UXVhbnRpdHkpO1xuXG4gICAgICAgIHRoaXMucHJvZHVjdHNMaXN0LnB1c2gocHJvZHVjdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzTGlzdDtcbiAgICB9XG4gICAgcHVibGljIGRlbGV0ZShwcm9kdWN0SWQ6IG51bWJlcik6IEJvb2xlYW5cbiAgICB7XG4gICAgICBsZXQgZGVsZXRlZDogQm9vbGVhbiA9IGZhbHNlO1xuICAgICAgdGhpcy5wcm9kdWN0c0xpc3QgPSB0aGlzLnByb2R1Y3RzTGlzdC5maWx0ZXIoXG4gICAgICAgIChwcm9kdWN0OiBQcm9kdWN0TW9kZWwuUHJvZHVjdCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZWQgPSBkZWxldGVkIHx8IHByb2R1Y3QuZ2V0SWQoKSA9PT0gcHJvZHVjdElkO1xuICAgICAgICAgIHJldHVybiBwcm9kdWN0LmdldElkKCkgIT09IHByb2R1Y3RJZFxuICAgICAgICB9XG4gICAgICApXG4gICAgICByZXR1cm4gZGVsZXRlZDtcbiAgICB9XG4gICAgcHVibGljIGZldGNoKHByb2R1Y3RJZDogbnVtYmVyKTogUHJvZHVjdE1vZGVsLlByb2R1Y3Qge1xuICAgICAgICByZXR1cm4gcHJvZHVjdElkICYmIHRoaXMucHJvZHVjdHNMaXN0LmZpbHRlcihcbiAgICAgICAgICAgIChwcm9kdWN0OiBQcm9kdWN0TW9kZWwuUHJvZHVjdCkgPT4gcHJvZHVjdC5nZXRJZCgpID09PSBwcm9kdWN0SWRcbiAgICAgICAgKS5zaGlmdCgpO1xuICAgIH1cbiAgICBwdWJsaWMgZmluZChwcm9kdWN0UXVlcnk6IHN0cmluZyk6IFByb2R1Y3RNb2RlbC5Qcm9kdWN0IHtcbiAgICAgIGxldCBwcm9kdWN0SWQ6IG51bWJlciA9IHBhcnNlSW50KHByb2R1Y3RRdWVyeSk7XG4gICAgICBwcm9kdWN0UXVlcnkgPSBwcm9kdWN0UXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzTGlzdC5maWx0ZXIoXG4gICAgICAgICAgKHByb2R1Y3Q6IFByb2R1Y3RNb2RlbC5Qcm9kdWN0KSA9PiBwcm9kdWN0LmdldElkKCkgPT09IHByb2R1Y3RJZFxuICAgICAgICAgIHx8IHByb2R1Y3QuZ2V0TmFtZSgpLnRvTG93ZXJDYXNlKCkgPT09IHByb2R1Y3RRdWVyeVxuICAgICAgKS5zaGlmdCgpO1xuICAgIH1cbn1cbiJdfQ==
